<!DOCTYPE HTML><html><head><meta charset="utf-8"><title>Splitting a list into chunks with unfoldr « lambda fairy</title><link href="/styles/styles.css" rel="stylesheet"><link href="/styles/hk-pyg.css" rel="stylesheet"><link href="//fonts.googleapis.com/css?family=Cabin:400,700,400italic,700italic" rel="stylesheet"><meta content="#5c3566" name="theme-color"><meta content="width=device-width" name="viewport"><link href="/atom.xml" type="application/atom+xml" rel="alternate"></head><body><header><h1><a href="/">lambda fairy</a></h1></header><div id="midriff"><nav><ul><li><a href="/">Home</a></li><li><a href="/cv">CV</a></li><li class="current"><a href="/blog">Blog</a></li><li><a href="https://github.com/lambda-fairy">GitHub</a></li></ul></nav><section><h1>Splitting a list into chunks with unfoldr</h1><p>I’m quite fond of the <a href="https://hackage.haskell.org/package/base-4.9.1.0/docs/Data-List.html#v:unfoldr"><code>unfoldr</code></a> function in Haskell. It doesn’t seem well known, which is a shame because I’ve often found it useful.</p>
<p>One of these uses is in splitting a list into chunks of a specified length. Here are some examples of what I’m going for:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> chunks <span class="dv">1</span> [<span class="ch">'a'</span><span class="op">..</span><span class="ch">'l'</span>]</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>[<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>,<span class="st">&quot;d&quot;</span>,<span class="st">&quot;e&quot;</span>,<span class="st">&quot;f&quot;</span>,<span class="st">&quot;g&quot;</span>,<span class="st">&quot;h&quot;</span>,<span class="st">&quot;i&quot;</span>,<span class="st">&quot;j&quot;</span>,<span class="st">&quot;k&quot;</span>,<span class="st">&quot;l&quot;</span>]</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> chunks <span class="dv">2</span> [<span class="ch">'a'</span><span class="op">..</span><span class="ch">'l'</span>]</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>[<span class="st">&quot;ab&quot;</span>,<span class="st">&quot;cd&quot;</span>,<span class="st">&quot;ef&quot;</span>,<span class="st">&quot;gh&quot;</span>,<span class="st">&quot;ij&quot;</span>,<span class="st">&quot;kl&quot;</span>]</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> chunks <span class="dv">3</span> [<span class="ch">'a'</span><span class="op">..</span><span class="ch">'l'</span>]</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a>[<span class="st">&quot;abc&quot;</span>,<span class="st">&quot;def&quot;</span>,<span class="st">&quot;ghi&quot;</span>,<span class="st">&quot;jkl&quot;</span>]</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> chunks <span class="dv">4</span> [<span class="ch">'a'</span><span class="op">..</span><span class="ch">'l'</span>]</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a>[<span class="st">&quot;abcd&quot;</span>,<span class="st">&quot;efgh&quot;</span>,<span class="st">&quot;ijkl&quot;</span>]</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span> chunks <span class="dv">5</span> [<span class="ch">'a'</span><span class="op">..</span><span class="ch">'l'</span>]</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a>[<span class="st">&quot;abcde&quot;</span>,<span class="st">&quot;fghij&quot;</span>,<span class="st">&quot;kl&quot;</span>]</span></code></pre></div>
<p>And here’s the definition:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="ot">chunks ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> [a] <span class="ot">-&gt;</span> [[a]]</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>chunks <span class="ot">=</span> unfoldr <span class="op">$</span> \xs <span class="ot">-&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>    <span class="kw">case</span> xs <span class="kw">of</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a>        <span class="co">-- If there are no elements left, stop iteration</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>        [] <span class="ot">-&gt;</span> <span class="dt">Nothing</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>        <span class="co">-- Otherwise, split off n elements and yield them</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a>        _ <span class="ot">-&gt;</span> <span class="dt">Just</span> <span class="op">$</span> <span class="fu">splitAt</span> n xs</span></code></pre></div><p><small>(Posted on <a href="/blog/chunky-bacon/" title="link to this post"><time>Mar 13, 2017</time></a>.)</small></p></section></div><footer><p>Licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.</p></footer>
<script src="//static.getclicky.com/js"></script><script>try{ clicky.init(100874553); }catch(e){}</script>
<noscript><p><img alt="" width="1" height="1" src="//in.getclicky.com/100874553ns.gif"></p></noscript>
</body></html>